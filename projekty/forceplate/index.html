<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budowa Platformy Tensometrycznej - Maciej Łukasiewicz</title>
    <link rel="stylesheet" href="../../styles.css">
    <style>
        /* Forceplate-specific article styles */
        .figure {
            margin: 2rem 0;
            text-align: center;
        }

        .figure img {
            max-width: 100%;
            border: 1px solid var(--border);
            border-radius: 2px;
        }

        .figure-caption {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 0.5rem;
            font-style: italic;
        }

        .two-column {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        .two-column .figure {
            flex: 1;
            max-width: 50%;
        }

        .formula {
            background-color: var(--bg-secondary);
            padding: 1rem 1.5rem;
            margin: 1rem 0;
            border-left: 2px solid var(--text-muted);
            font-family: var(--font-mono);
            font-size: 0.875rem;
        }

        .formula-block {
            text-align: center;
            margin: 0.5rem 0;
            font-size: 1rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            font-size: 0.875rem;
        }

        th,
        td {
            border: 1px solid var(--border);
            padding: 0.5rem 0.75rem;
            text-align: left;
        }

        th {
            background-color: var(--bg-secondary);
            color: var(--text);
        }

        td {
            color: var(--text-muted);
        }

        code {
            background-color: var(--bg-secondary);
            padding: 0.125rem 0.375rem;
            border-radius: 2px;
            font-family: var(--font-mono);
            font-size: 0.8125rem;
        }

        @media (max-width: 640px) {
            .two-column {
                flex-direction: column;
            }

            .two-column .figure {
                max-width: 100%;
            }
        }
    </style>
</head>

<body>
    <header>
        <div class="container">
            <a href="../../index.html" class="logo">ML</a>
            <button class="hamburger" aria-label="Menu"
                onclick="document.querySelector('nav').classList.toggle('open')">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <nav>
                <a href="../../o-mnie.html" class="nav-link">O mnie</a>
                <a href="../../projekty.html" class="nav-link active">Projekty</a>
                <a href="../../blog.html" class="nav-link">Blog</a>
                <a href="../../kontakt.html" class="nav-link">Kontakt</a>
            </nav>
        </div>
    </header>

    <main>
        <div class="container">
            <article>
                <a href="../../projekty.html" class="nav-link" style="font-size: 0.875rem;"><svg
                        class="arrow-icon arrow-back" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M17 17 7 7" />
                        <path d="M17 7H7v10" />
                    </svg>Projekty</a>

                <h1 style="margin-top: 1rem;">Budowa Platformy Tensometrycznej</h1>
                <div class="article-meta">2026 · <a href="https://github.com/citrustiara/Force-Plate-PRO"
                        target="_blank" rel="noopener">GitHub</a>
                </div>

                <h2>1. Wstęp</h2>
                <p>
                    Platforma tensometryczna (force plate) jest urządzeniem pomiarowym wykorzystywanym w biomechanice,
                    fizjoterapii
                    oraz treningu sportowym do pomiaru sił reakcji podłoża. Niniejsze sprawozdanie przedstawia proces
                    budowy
                    prototypowej platformy tensometrycznej opartej na mikrokontrolerze ESP32 i czujnikach
                    tensometrycznych (load cells).
                </p>
                <p>
                    Głównym celem projektu było stworzenie ekonomicznego urządzenia umożliwiającego pomiar wysokości
                    skoku,
                    czasu lotu, mocy oraz prędkości startu. Platforma komunikuje się z aplikacją desktopową poprzez port
                    szeregowy,
                    z planowaną przyszłą integracją Bluetooth. W przeciwieństwie do komercyjnych rozwiązań, które
                    kosztują tysiące dolarów, ten projekt wykorzystuje przystępne cenowo, gotowe komponenty (ESP32,
                    Belki Tensometryczne), zachowując jednocześnie wysoką jakość danych dzięki zaawansowanemu
                    przetwarzaniu programowemu.
                </p>

                <div class="figure">
                    <img src="complete.jpg" alt="Gotowa platforma tensometryczna">
                    <div class="figure-caption">Rys. 1. Gotowa, zamknięta platforma tensometryczna (prototyp na płycie
                        OSB 1m × 1m)</div>
                </div>

                <h2>2. Komponenty Sprzętowe</h2>

                <h3>2.1. Czujniki Tensometryczne (Load Cells)</h3>
                <p>
                    Tensometr (strain gauge) to czujnik elektryczny służący do pomiaru odkształceń mechanicznych.
                    Zasada działania opiera się na zmianie rezystancji przewodnika przy jego rozciąganiu lub ściskaniu.
                    Zależność tę opisuje wzór:
                </p>
                <div class="formula">
                    <div class="formula-block">ΔR/R = GF · ε</div>
                    gdzie: ΔR – zmiana rezystancji, R – rezystancja nominalna, GF – współczynnik czułości (gauge factor,
                    typowo ~2),
                    ε – odkształcenie względne
                </div>
                <p>
                    W projekcie wykorzystano 8 czujników tensometrycznych typu belkowego (identycznych jak w wagach
                    łazienkowych),
                    każdy o maksymalnym obciążeniu 50 kg. Łączna nośność platformy wynosi więc teoretycznie 400 kg.
                    Czujniki rozmieszczone są w układzie ośmiokąta foremnego, co zapewnia równomierny rozkład
                    obciążenia.
                </p>

                <div class="two-column">
                    <div class="figure">
                        <img src="loadcell2.png" alt="Czujnik tensometryczny">
                        <div class="figure-caption">Rys. 2. Czujnik tensometryczny typu belkowego</div>
                    </div>
                    <div class="figure">
                        <img src="top.jpg" alt="Rozmieszczenie czujników">
                        <div class="figure-caption">Rys. 3. Rozmieszczenie 8 czujników w układzie ośmiokąta</div>
                    </div>
                </div>

                <h3>2.2. Mostek Wheatstone'a</h3>
                <p>
                    Czujniki tensometryczne łączone są w konfigurację mostka Wheatstone'a, co pozwala na precyzyjny
                    pomiar niewielkich zmian rezystancji. 8 czujników podzielono na 4 pary, łącząc w każdej parze
                    wszystkie 3 przewody (czerwony z czerwonym, czarny z czarnym, żółty z żółtym):
                </p>
                <ul>
                    <li><strong>Para górna-lewa (TL):</strong> Czujniki 1 i 2</li>
                    <li><strong>Para górna-prawa (TR):</strong> Czujniki 3 i 4</li>
                    <li><strong>Para dolna-lewa (BL):</strong> Czujniki 5 i 6</li>
                    <li><strong>Para dolna-prawa (BR):</strong> Czujniki 7 i 8</li>
                </ul>

                <p><strong>Tworzenie pętli mostka (przewody czarne i żółte):</strong></p>
                <ul>
                    <li>Połącz czarny TL z czarnym TR (góra platformy, poziomo)</li>
                    <li>Połącz czarny BL z czarnym BR (dół platformy, poziomo)</li>
                    <li>Połącz żółty TL z żółtym BL (lewa strona, pionowo)</li>
                    <li>Połącz żółty TR z żółtym BR (prawa strona, pionowo)</li>
                </ul>

                <p><strong>Podłączenie do przetwornika CS1238 (przewody czerwone):</strong></p>
                <ul>
                    <li>Czerwony TL → E+ (Excitation Positive)</li>
                    <li>Czerwony BR → E− (Excitation Negative)</li>
                    <li>Czerwony TR → A+ (Signal Positive)</li>
                    <li>Czerwony BL → A− (Signal Negative)</li>
                </ul>

                <p><strong>Podłączenie CS1238 do ESP32:</strong></p>
                <ul>
                    <li>DOUT → GPIO 19</li>
                    <li>SCK → GPIO 18</li>
                    <li>VDD → 3.3V</li>
                    <li>GND → GND</li>
                </ul>

                <h3>2.3. Przetwornik ADC CS1238</h3>
                <p>
                    CS1238 to precyzyjny 24-bitowy przetwornik analogowo-cyfrowy (ADC) zaprojektowany specjalnie
                    do aplikacji wagowych. Kluczowe parametry:
                </p>
                <table>
                    <tr>
                        <th>Parametr</th>
                        <th>Wartość</th>
                    </tr>
                    <tr>
                        <td>Rozdzielczość</td>
                        <td>24 bity</td>
                    </tr>
                    <tr>
                        <td>Częstotliwość próbkowania</td>
                        <td>10 / 40 / 640 / 1280 Hz (programowalna)</td>
                    </tr>
                    <tr>
                        <td>Wzmocnienie (PGA)</td>
                        <td>1 / 2 / 64 / 128 (programowalne)</td>
                    </tr>
                    <tr>
                        <td>Napięcie zasilania</td>
                        <td>2.6V – 5.5V</td>
                    </tr>
                    <tr>
                        <td>Interfejs</td>
                        <td>Dwuprzewodowy (CLK + DATA)</td>
                    </tr>
                </table>
                <p>
                    W projekcie CS1238 skonfigurowano na częstotliwość 1280 Hz z wzmocnieniem PGA 128,
                    co zapewnia wysoką rozdzielczość czasową niezbędną do precyzyjnego pomiaru dynamiki skoku.
                </p>

                <div class="two-column">
                    <div class="figure">
                        <img src="cs1238.png" alt="Moduł CS1238">
                        <div class="figure-caption">Rys. 5. Moduł przetwornika CS1238</div>
                    </div>
                    <div class="figure">
                        <img src="esp32.png" alt="Płytka ESP32">
                        <div class="figure-caption">Rys. 6. Mikrokontroler ESP32 LOLIN32 Lite</div>
                    </div>
                </div>

                <h3>2.4. Mikrokontroler ESP32</h3>
                <p>
                    ESP32 to wydajny mikrokontroler dwurdzeniowy z wbudowanym WiFi i Bluetooth.
                    W projekcie odpowiada za:
                </p>
                <ul>
                    <li>Odczyt danych z przetwornika CS1238 (GPIO18 – SCK, GPIO19 – DOUT)</li>
                    <li>Automatyczne tarowanie przy starcie (pomiar offsetu przez 2 sekundy)</li>
                    <li>Pomiar i raportowanie rzeczywistej częstotliwości próbkowania</li>
                    <li>Transmisję surowych danych przez port szeregowy (921600 baud)</li>
                </ul>
                <p>
                    Wszystkie obliczenia fizyczne (prędkość, moc, wysokość skoku) wykonywane są po stronie
                    aplikacji desktopowej, co umożliwia elastyczne modyfikacje algorytmów bez konieczności
                    przeprogramowania mikrokontrolera. ESP32 posiada wbudowany moduł Bluetooth, który zostanie
                    wykorzystany w przyszłych wersjach do bezprzewodowej transmisji danych.
                </p>

                <div class="figure">
                    <img src="closeup.jpg" alt="Zbliżenie elektroniki">
                    <div class="figure-caption">Rys. 7. Zbliżenie na podłączenie modułów: ESP32, CS1238, bateria LiPo
                        1000mAh</div>
                </div>

                <h2>3. Algorytm Pomiaru Skoku</h2>

                <h3>3.1. Maszyna Stanów</h3>
                <p>Oprogramowanie implementuje maszynę stanów obsługującą cały cykl skoku:</p>
                <ol>
                    <li><strong>IDLE / WEIGHING:</strong> Oczekiwanie na stabilne obciążenie i automatyczny pomiar masy
                        ciała</li>
                    <li><strong>READY:</strong> Masa zmierzona, platforma gotowa do skoku</li>
                    <li><strong>PROPULSION:</strong> Wykryto ruch – całkowanie sił w celu obliczenia prędkości</li>
                    <li><strong>IN_AIR:</strong> Siła poniżej progu – faza lotu</li>
                    <li><strong>LANDING:</strong> Lądowanie – zbieranie danych do wykresu mocy</li>
                </ol>

                <h3>3.2. Obliczenia Fizyczne</h3>

                <p><strong>Wysokość skoku z czasu lotu:</strong></p>
                <div class="formula">
                    <div class="formula-block">h = (g · t²) / 8</div>
                    gdzie: h – wysokość [m], g – przyspieszenie ziemskie (9.81 m/s²), t – czas lotu [s]
                </div>

                <p><strong>Prędkość startu z impulsu siły:</strong></p>
                <p>
                    Podczas fazy propulsji (odpychania) system całkuje przyspieszenie wynikające z siły netto:
                </p>
                <div class="formula">
                    <div class="formula-block">a = (F<sub>netto</sub>) / m = ((F<sub>mierzona</sub> - m·g)) / m</div>
                    <div class="formula-block">v(t) = ∫ a · dt</div>
                </div>
                <p>
                    Prędkość w momencie oderwania (takeoff velocity) pozwala obliczyć wysokość metodą impulsową:
                </p>
                <div class="formula">
                    <div class="formula-block">h<sub>impulse</sub> = v² / (2g)</div>
                </div>

                <p><strong>Moc chwilowa i uśredniona:</strong></p>
                <div class="formula">
                    <div class="formula-block">P(t) = F(t) · v(t)</div>
                    <div class="formula-block">P<sub>avg</sub> = (1/n) · Σ P(t)</div>
                </div>
                <p>
                    System rejestruje również moc szczytową (peak power) oraz stosuje wzory empiryczne Haramana i
                    Sayersa
                <h3>3.3. Kluczowe Funkcje Algorytmiczne</h3>
                <ul>
                    <li><strong>Retrospektywna Całkowanie Impulsu (Retroactive Pulse Integration):</strong> System
                        buforuje dane w sposób ciągły. Po wykryciu ruchu algorytm "cofa się" o ~75ms, aby uchwycić
                        początek impulsu, który wystąpił przed przekroczeniem progu wyzwalania.</li>
                    <li><strong>Automatyczna Detekcja Faz:</strong> Precyzyjne rozróżnianie fazy głębokiego odciążenia
                        (<em>Unweighting</em>) od fazy lotu (<em>Flight</em>) na podstawie analizy prędkości i czasu
                        trwania niskiej wagi.</li>
                    <li><strong>Dynamiczna Kontrola Stabilności:</strong> Podczas ważenia system analizuje statystyki
                        (średnia, wariancja) w oknach 300ms, aby zatwierdzić pomiar tylko przy idealnym bezruchu.</li>
                    <li><strong>Kompensacja Dryfu (Smart Auto-Tare):</strong> Monitorowanie platformy w stanie spoczynku
                        (IDLE). Jeśli przez 1 sekundę nie wykryto ruchu, a waga dryfuje powyżej 0.2 kg lecz poniżej
                        AIR_THRESHOLD, następuje
                        automatyczne zerowanie czujników.</li>
                    <li><strong>Fizyka Skoków Seryjnych:</strong> Przy skokach wielokrotnych (rebound), prędkość
                        uderzenia z poprzedniego skoku (wyliczona z czasu lotu) jest zachowywana jako prędkość
                        początkowa kolejnego, co zapewnia zachowanie pędu.</li>
                    <li><strong>Ochrona przed Drganiami (Bounce Protection):</strong> Inteligentne filtrowanie ignoruje
                        drgania mechaniczne platformy bezpośrednio po wybiciu, zapobiegając fałszywym detekcjom
                        lądowania.</li>
                </ul>

                <h2>4. Aplikacja Desktopowa</h2>
                <p>
                    Aplikacja napisana w Python (DearPyGui) umożliwia wizualizację danych w czasie rzeczywistym
                    oraz analizę zarejestrowanych skoków.
                </p>

                <div class="figure">
                    <img src="example.png" alt="Screenshot aplikacji">
                    <div class="figure-caption">Rys. 8. Interfejs aplikacji – analiza skoku z wykresem Siły, Prędkości i
                        Mocy, wersja z dnia 21.02.2026</div>
                </div>

                <h2>5. Komunikacja</h2>
                <p>
                    Obecnie platforma komunikuje się z komputerem poprzez port szeregowy USB (baud rate 921600).
                    Mikrokontroler przesyła czysty strumień JSON zawierający surową wartość:
                </p>
                <div class="formula">
                    <code>{"w":156234}</code> – surowa wartość z przetwornika ADC
                </div>
                <p>
                    Timestamping (znacznik czasu) jest nadawany przez aplikację na PC w momencie odebrania pakietu.
                    Pozwala to na uproszczenie firmware'u mikrokontrolera (plik <code>platform_send.ino</code>), który
                    zajmuje się jedynie szybkim próbkowaniem.
                    Aplikacja desktopowa wykonuje wszystkie obliczenia fizyczne.
                </p>
                <p>
                    W przyszłości planowana jest komunikacja bezprzewodowa poprzez Bluetooth Low Energy (BLE)
                    wbudowany w ESP32, co umożliwi pełną mobilność urządzenia zasilanego baterią LiPo.
                </p>

                <h2>6. Podsumowanie</h2>
                <p>
                    Zbudowany prototyp platformy tensometrycznej stanowi funkcjonalne urządzenie do analizy skoków.
                    Kluczowe osiągnięcia projektu:
                </p>
                <ul>
                    <li>Częstotliwość próbkowania 1280 Hz zapewniająca wysoką rozdzielczość czasową</li>
                    <li>Automatyczny pomiar masy ciała z detekcją stabilności</li>
                    <li>Całkowanie impulsowe do obliczenia prędkości, mocy i wysokości skoku</li>
                    <li>Wizualizacja danych w czasie rzeczywistym</li>
                </ul>
                <p>
                    Dalsze plany rozwoju obejmują: konstrukcję metalową zamiast OSB, zastosowanie przemysłowych
                    czujników tensometrycznych o wyższej precyzji oraz pełną integrację komunikacji Bluetooth. Najnowszą
                    wersję kodu
                    źródłowego można znaleźć na <a href="https://github.com/citrustiara/Force-Plate-PRO">GitHubie</a>.
                </p>

            </article>
        </div>
    </main>

    <footer>
        <div class="container">
            <span>© <span id="year"></span> Maciej Łukasiewicz</span>
            <div class="social-links">
                <a href="https://github.com/citrustiara" target="_blank" rel="noopener">GitHub</a>
                <a href="https://www.linkedin.com/in/maciej-łukasiewicz-85a264372" target="_blank"
                    rel="noopener">LinkedIn</a>
            </div>
        </div>
    </footer>

    <script>
        document.getElementById('year').textContent = new Date().getFullYear();
    </script>
</body>

</html>